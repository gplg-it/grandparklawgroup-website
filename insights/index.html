<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M649WB9Z');</script>
<!-- End Google Tag Manager --> 
   <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insights | Grand Park Law Group, A.P.C.</title>
    <meta name="description" content="Stay informed with legal insights, case results, and thought leadership from Grand Park Law Group.">
    
    <!-- Typography - Cormorant Garamond + Outfit -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=Outfit:wght@200;300;400;500;600&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="../assets/css/design-system.css">
    <link rel="stylesheet" href="../assets/css/main.css">

    <style>
        /* ============================================
           CSS CUSTOM PROPERTIES - GRAND PARK PALETTE
           ============================================ */
        :root {
            /* Primary Colors */
            --primary-dark: #1a1915;
            --primary-charcoal: #2d2a24;
            --primary-warm: #3d3830;
            --primary-light: #4a453c;
            
            /* Accent - Champagne Gold */
            --accent-gold: #c9a962;
            --accent-gold-light: #d4bc7d;
            --accent-gold-dark: #a68b4b;
            --accent-gold-glow: rgba(201, 169, 98, 0.15);
            
            /* Neutrals */
            --cream: #f5f2eb;
            --cream-dark: #e8e4db;
            --off-white: #faf9f6;
            --text-light: rgba(250, 249, 246, 0.9);
            --text-muted: rgba(250, 249, 246, 0.55);
            --text-dark: #1a1915;
            
            /* Typography */
            --font-display: 'Cormorant Garamond', Georgia, serif;
            --font-body: 'Outfit', -apple-system, sans-serif;
            
            /* Spacing */
            --space-xs: 0.5rem;
            --space-sm: 1rem;
            --space-md: 2rem;
            --space-lg: 4rem;
            --space-xl: 6rem;
            --space-2xl: 10rem;
            
            /* Transitions */
            --ease-out-expo: cubic-bezier(0.19, 1, 0.22, 1);
            --ease-out-quart: cubic-bezier(0.25, 1, 0.5, 1);
            --transition-fast: 0.2s var(--ease-out-quart);
            --transition-smooth: 0.5s var(--ease-out-expo);
            --transition-slow: 0.8s var(--ease-out-expo);
            --transition-slower: 1.2s var(--ease-out-expo);
            
            /* Layout */
            --max-width: 1400px;
            --header-height: 80px;
        }

        /* ============================================
           BASE RESET & GLOBAL STYLES
           ============================================ */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: var(--font-body);
            font-weight: 300;
            background: var(--primary-dark);
            color: var(--text-light);
            line-height: 1.7;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        ::selection {
            background: var(--accent-gold);
            color: var(--primary-dark);
        }

        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: var(--primary-dark);
        }
        ::-webkit-scrollbar-thumb {
            background: var(--accent-gold);
            border-radius: 3px;
        }

        img {
            max-width: 100%;
            height: auto;
        }

        a {
            color: inherit;
            text-decoration: none;
        }

        /* ============================================
           LOADING OVERLAY
           ============================================ */
        .page-loader {
            position: fixed;
            inset: 0;
            background: var(--primary-dark);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.6s ease, visibility 0.6s ease;
        }

        .page-loader.loaded {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .loader-content {
            text-align: center;
        }

        .loader-logo {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 400;
            letter-spacing: 0.3em;
            color: var(--accent-gold);
            text-transform: uppercase;
            margin-bottom: var(--space-md);
        }

        .loader-bar {
            width: 120px;
            height: 2px;
            background: var(--primary-warm);
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }

        .loader-bar::after {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 40%;
            background: var(--accent-gold);
            animation: loaderSlide 1s ease-in-out infinite;
        }

        @keyframes loaderSlide {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(350%); }
        }

        /* ============================================
           HEADER & NAVIGATION
           ============================================ */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            height: var(--header-height);
            padding: 0 var(--space-lg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: transparent;
            transition: background var(--transition-smooth), box-shadow var(--transition-smooth);
        }

        .header.scrolled {
            background: rgba(26, 25, 21, 0.97);
            backdrop-filter: blur(20px);
            box-shadow: 0 1px 0 rgba(201, 169, 98, 0.1);
        }

        .logo {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .logo-text {
            font-family: var(--font-display);
            font-size: 1.4rem;
            font-weight: 400;
            letter-spacing: 0.12em;
            color: var(--off-white);
            text-transform: uppercase;
            transition: color var(--transition-fast);
        }

        .logo:hover .logo-text {
            color: var(--accent-gold);
        }

        .logo-tagline {
            font-family: var(--font-body);
            font-size: 0.6rem;
            font-weight: 300;
            letter-spacing: 0.35em;
            color: var(--accent-gold);
            text-transform: uppercase;
        }

        .nav-desktop {
            display: flex;
            gap: var(--space-lg);
            align-items: center;
        }

        .nav-link {
            font-size: 0.7rem;
            font-weight: 400;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--text-light);
            position: relative;
            padding: 8px 0;
            transition: color var(--transition-fast);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 1px;
            background: var(--accent-gold);
            transition: width var(--transition-smooth);
        }

        .nav-link:hover::after,
        .nav-link.active::after {
            width: 100%;
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--accent-gold);
        }

        /* Mobile Menu Toggle */
        .menu-toggle {
            display: none;
            flex-direction: column;
            gap: 6px;
            cursor: pointer;
            padding: 10px;
            margin-right: -10px;
        }

        .menu-toggle span {
            width: 24px;
            height: 1px;
            background: var(--off-white);
            transition: all var(--transition-fast);
        }

        @media (max-width: 968px) {
            .header {
                padding: 0 var(--space-md);
            }
            .nav-desktop {
                display: none;
            }
            .menu-toggle {
                display: flex;
            }
        }

        /* ============================================
           HERO CAROUSEL SECTION
           ============================================ */
        .hero-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            background: var(--primary-dark);
            overflow: hidden;
        }

        .hero-bg-pattern {
            position: absolute;
            inset: 0;
            opacity: 0.03;
            background-image: 
                linear-gradient(90deg, var(--accent-gold) 1px, transparent 1px),
                linear-gradient(var(--accent-gold) 1px, transparent 1px);
            background-size: 60px 60px;
            pointer-events: none;
        }

        .hero-gradient {
            position: absolute;
            inset: 0;
            background: 
                radial-gradient(ellipse at 20% 30%, rgba(201, 169, 98, 0.06) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 70%, rgba(201, 169, 98, 0.04) 0%, transparent 40%),
                linear-gradient(180deg, transparent 0%, var(--primary-dark) 100%);
            pointer-events: none;
        }

        .hero-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: calc(var(--header-height) + var(--space-xl)) var(--space-lg) var(--space-xl);
            max-width: var(--max-width);
            margin: 0 auto;
            width: 100%;
            position: relative;
            z-index: 1;
            text-align: left;
        }

        .hero-eyebrow {
            display: inline-flex;
            align-items: center;
            gap: 16px;
            font-size: 0.65rem;
            font-weight: 500;
            letter-spacing: 0.4em;
            text-transform: uppercase;
            color: var(--accent-gold);
            margin-bottom: var(--space-md);
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s var(--ease-out-expo) 0.3s forwards;
        }

        .hero-eyebrow::before {
            content: '';
            width: 40px;
            height: 1px;
            background: var(--accent-gold);
        }

        .hero-title {
            font-family: var(--font-display);
            font-size: clamp(3.5rem, 10vw, 7rem);
            font-weight: 300;
            line-height: 1;
            color: var(--off-white);
            margin-bottom: var(--space-md);
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 0.8s var(--ease-out-expo) 0.5s forwards;
        }

        .hero-title em {
            font-style: italic;
            color: var(--accent-gold);
        }

        .hero-description {
            font-size: 1.15rem;
            font-weight: 300;
            color: var(--text-muted);
            max-width: 550px;
            line-height: 1.9;
            margin-bottom: var(--space-lg);
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.8s var(--ease-out-expo) 0.7s forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ============================================
           FEATURED CAROUSEL
           ============================================ */
        .featured-carousel-section {
            background: var(--primary-charcoal);
            position: relative;
            overflow: hidden;
        }

        .featured-carousel-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent-gold), transparent);
            opacity: 0.3;
        }

        .carousel-container {
            max-width: var(--max-width);
            margin: 0 auto;
            padding: var(--space-xl) var(--space-lg);
        }

        .carousel-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: var(--space-lg);
        }

        .carousel-label {
            font-size: 0.65rem;
            font-weight: 500;
            letter-spacing: 0.4em;
            text-transform: uppercase;
            color: var(--accent-gold);
            margin-bottom: var(--space-xs);
        }

        .carousel-title {
            font-family: var(--font-display);
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 300;
            color: var(--off-white);
        }

        .carousel-controls {
            display: flex;
            gap: var(--space-sm);
        }

        .carousel-btn {
            width: 50px;
            height: 50px;
            border: 1px solid rgba(201, 169, 98, 0.3);
            background: transparent;
            color: var(--accent-gold);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
        }

        .carousel-btn:hover {
            background: var(--accent-gold);
            color: var(--primary-dark);
            border-color: var(--accent-gold);
        }

        .carousel-btn svg {
            width: 20px;
            height: 20px;
        }

        .carousel-track-wrapper {
            overflow: hidden;
            margin: 0 -20px;
            padding: 0 20px;
        }

        .carousel-track {
            display: flex;
            gap: var(--space-md);
            transition: transform 0.6s var(--ease-out-expo);
        }

        .featured-card {
            flex: 0 0 calc(50% - var(--space-sm));
            min-width: 400px;
            background: var(--primary-warm);
            border: 1px solid rgba(201, 169, 98, 0.08);
            position: relative;
            overflow: hidden;
            transition: all var(--transition-smooth);
        }

        @media (max-width: 968px) {
            .featured-card {
                flex: 0 0 100%;
                min-width: 300px;
            }
        }

        .featured-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(201, 169, 98, 0.05) 0%, transparent 50%);
            opacity: 0;
            transition: opacity var(--transition-smooth);
        }

        .featured-card:hover {
            border-color: rgba(201, 169, 98, 0.25);
            transform: translateY(-8px);
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.4);
        }

        .featured-card:hover::before {
            opacity: 1;
        }

        .featured-card-image {
            aspect-ratio: 16/9;
            overflow: hidden;
            position: relative;
        }

        .featured-card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform var(--transition-slow);
        }

        .featured-card:hover .featured-card-image img {
            transform: scale(1.08);
        }

        .featured-card-image .placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-charcoal) 0%, var(--primary-dark) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .featured-card-image .placeholder svg {
            width: 48px;
            height: 48px;
            color: var(--accent-gold);
            opacity: 0.2;
        }

        .featured-card-category {
            position: absolute;
            top: var(--space-md);
            left: var(--space-md);
            font-size: 0.6rem;
            font-weight: 500;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--off-white);
            background: rgba(26, 25, 21, 0.85);
            backdrop-filter: blur(10px);
            padding: 8px 16px;
            border: 1px solid rgba(201, 169, 98, 0.2);
        }

        .featured-card-body {
            padding: var(--space-md);
            position: relative;
        }

        .featured-card-meta {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-sm);
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .featured-card-meta .divider {
            width: 4px;
            height: 4px;
            background: var(--accent-gold);
            border-radius: 50%;
        }

        .featured-card-title {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 400;
            line-height: 1.35;
            color: var(--off-white);
            margin-bottom: var(--space-sm);
            transition: color var(--transition-fast);
        }

        .featured-card:hover .featured-card-title {
            color: var(--accent-gold);
        }

        .featured-card-excerpt {
            font-size: 0.9rem;
            color: var(--text-muted);
            line-height: 1.7;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .featured-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: var(--space-md);
            padding-top: var(--space-md);
            border-top: 1px solid rgba(201, 169, 98, 0.1);
        }

        .read-time {
            font-size: 0.75rem;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .read-time svg {
            width: 14px;
            height: 14px;
            color: var(--accent-gold);
        }

        .card-arrow {
            width: 36px;
            height: 36px;
            border: 1px solid rgba(201, 169, 98, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-gold);
            transition: all var(--transition-fast);
        }

        .featured-card:hover .card-arrow {
            background: var(--accent-gold);
            color: var(--primary-dark);
            border-color: var(--accent-gold);
            transform: translateX(4px);
        }

        .card-arrow svg {
            width: 16px;
            height: 16px;
        }

        /* Carousel Progress */
        .carousel-progress {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: var(--space-lg);
        }

        .carousel-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(201, 169, 98, 0.2);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .carousel-dot.active {
            width: 32px;
            border-radius: 4px;
            background: var(--accent-gold);
        }

        /* ============================================
           SEARCH & FILTER SECTION
           ============================================ */
        .filter-section {
            background: var(--primary-dark);
            border-bottom: 1px solid rgba(201, 169, 98, 0.1);
            position: sticky;
            top: var(--header-height);
            z-index: 100;
        }

        .filter-container {
            max-width: var(--max-width);
            margin: 0 auto;
            padding: var(--space-md) var(--space-lg);
        }

        .filter-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: var(--space-md);
            flex-wrap: wrap;
        }

        .search-box {
            position: relative;
            flex: 1;
            max-width: 400px;
        }

        .search-input {
            width: 100%;
            font-family: var(--font-body);
            font-size: 0.9rem;
            color: var(--text-light);
            background: var(--primary-charcoal);
            border: 1px solid rgba(201, 169, 98, 0.15);
            padding: 14px 20px 14px 48px;
            outline: none;
            transition: all var(--transition-fast);
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }

        .search-input:focus {
            border-color: var(--accent-gold);
            box-shadow: 0 0 0 3px rgba(201, 169, 98, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 18px;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            color: var(--text-muted);
            pointer-events: none;
        }

        .filter-tabs {
            display: flex;
            gap: 4px;
            flex-wrap: wrap;
        }

        .filter-tab {
            font-family: var(--font-body);
            font-size: 0.7rem;
            font-weight: 400;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            color: var(--text-muted);
            background: transparent;
            border: 1px solid transparent;
            padding: 12px 20px;
            cursor: pointer;
            transition: all var(--transition-fast);
            white-space: nowrap;
        }

        .filter-tab:hover {
            color: var(--text-light);
            border-color: rgba(201, 169, 98, 0.2);
        }

        .filter-tab.active {
            color: var(--accent-gold);
            border-color: var(--accent-gold);
            background: rgba(201, 169, 98, 0.05);
        }

        /* ============================================
           INSIGHTS GRID
           ============================================ */
        .insights-section {
            background: var(--primary-dark);
            padding: var(--space-xl) var(--space-lg);
            min-height: 60vh;
        }

        .insights-container {
            max-width: var(--max-width);
            margin: 0 auto;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-lg);
        }

        .results-info {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .results-info strong {
            color: var(--accent-gold);
        }

        .view-toggle {
            display: flex;
            gap: 8px;
        }

        .view-btn {
            width: 40px;
            height: 40px;
            border: 1px solid rgba(201, 169, 98, 0.2);
            background: transparent;
            color: var(--text-muted);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
        }

        .view-btn:hover,
        .view-btn.active {
            color: var(--accent-gold);
            border-color: var(--accent-gold);
        }

        .view-btn svg {
            width: 18px;
            height: 18px;
        }

        /* Grid Layout */
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-md);
        }

        .insights-grid.list-view {
            grid-template-columns: 1fr;
            gap: var(--space-sm);
        }

        @media (max-width: 1200px) {
            .insights-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .insights-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Insight Card */
        .insight-card {
            background: var(--primary-charcoal);
            border: 1px solid rgba(201, 169, 98, 0.06);
            position: relative;
            overflow: hidden;
            opacity: 0;
            transform: translateY(30px);
            transition: all var(--transition-smooth);
        }

        .insight-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .insight-card:hover {
            border-color: rgba(201, 169, 98, 0.2);
            transform: translateY(-6px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .insight-card-link {
            display: block;
        }

        .insight-card .card-image {
            aspect-ratio: 16/10;
            overflow: hidden;
            position: relative;
        }

        .insight-card .card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform var(--transition-slow);
        }

        .insight-card:hover .card-image img {
            transform: scale(1.06);
        }

        .insight-card .card-image .placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-warm) 0%, var(--primary-dark) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .insight-card .card-image .placeholder svg {
            width: 40px;
            height: 40px;
            color: var(--accent-gold);
            opacity: 0.15;
        }

        .insight-card .card-content {
            padding: var(--space-md);
        }

        .insight-card .card-category {
            font-size: 0.6rem;
            font-weight: 500;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            color: var(--accent-gold);
            margin-bottom: var(--space-xs);
        }

        .insight-card .card-title {
            font-family: var(--font-display);
            font-size: 1.25rem;
            font-weight: 400;
            line-height: 1.35;
            color: var(--off-white);
            margin-bottom: var(--space-xs);
            transition: color var(--transition-fast);
        }

        .insight-card:hover .card-title {
            color: var(--accent-gold);
        }

        .insight-card .card-date {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: var(--space-sm);
        }

        .insight-card .card-excerpt {
            font-size: 0.88rem;
            color: var(--text-muted);
            line-height: 1.7;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .insight-card .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: var(--space-md);
            padding-top: var(--space-md);
            border-top: 1px solid rgba(201, 169, 98, 0.08);
        }

        /* List View Card */
        .insights-grid.list-view .insight-card {
            display: grid;
            grid-template-columns: 280px 1fr;
        }

        .insights-grid.list-view .insight-card .card-image {
            aspect-ratio: auto;
            height: 100%;
        }

        @media (max-width: 768px) {
            .insights-grid.list-view .insight-card {
                grid-template-columns: 1fr;
            }
        }

        /* Source Badge */
        .source-badge {
            position: absolute;
            top: var(--space-sm);
            right: var(--space-sm);
            font-size: 0.55rem;
            font-weight: 500;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            padding: 4px 10px;
            border-radius: 2px;
        }

        .source-badge.ghost {
            background: rgba(21, 23, 26, 0.9);
            color: #a0aec0;
        }

        .source-badge.sheets {
            background: rgba(52, 168, 83, 0.9);
            color: white;
        }

        .source-badge.directus {
            background: rgba(102, 68, 255, 0.9);
            color: white;
        }

        /* Notification Styles */
        .notification {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            padding: 16px 24px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            gap: 16px;
            z-index: 10000;
            animation: slideUp 0.3s var(--ease-out-expo);
            max-width: 90%;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .notification-success {
            background: #065f46;
            color: #d1fae5;
            border: 1px solid #059669;
        }

        .notification-error {
            background: #7f1d1d;
            color: #fecaca;
            border: 1px solid #dc2626;
        }

        .notification-info {
            background: var(--primary-warm);
            color: var(--text-light);
            border: 1px solid var(--accent-gold);
        }

        .notification-close {
            background: none;
            border: none;
            color: inherit;
            font-size: 1.5rem;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity var(--transition-fast);
            line-height: 1;
        }

        .notification-close:hover {
            opacity: 1;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        /* Loading State */
        .loading-skeleton {
            background: linear-gradient(90deg, var(--primary-charcoal) 25%, var(--primary-warm) 50%, var(--primary-charcoal) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: var(--space-2xl) var(--space-lg);
        }

        .empty-state-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto var(--space-md);
            color: var(--accent-gold);
            opacity: 0.3;
        }

        .empty-state-title {
            font-family: var(--font-display);
            font-size: 1.5rem;
            color: var(--off-white);
            margin-bottom: var(--space-sm);
        }

        .empty-state-text {
            color: var(--text-muted);
        }

        /* Load More */
        .load-more-container {
            text-align: center;
            margin-top: var(--space-xl);
        }

        .load-more-btn {
            font-family: var(--font-body);
            font-size: 0.7rem;
            font-weight: 500;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            color: var(--off-white);
            background: transparent;
            border: 1px solid var(--accent-gold);
            padding: 18px 48px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all var(--transition-fast);
        }

        .load-more-btn::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--accent-gold);
            transform: scaleX(0);
            transform-origin: right;
            transition: transform var(--transition-smooth);
            z-index: -1;
        }

        .load-more-btn:hover::before {
            transform: scaleX(1);
            transform-origin: left;
        }

        .load-more-btn:hover {
            color: var(--primary-dark);
        }

        /* ============================================
           VIEW ALL LINK SECTION
           ============================================ */
        .view-all-section {
            background: var(--primary-dark);
            padding: var(--space-lg) var(--space-lg);
            border-top: 1px solid rgba(201, 169, 98, 0.1);
        }

        .view-all-container {
            max-width: var(--max-width);
            margin: 0 auto;
        }

        .view-all-link {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-size: 0.75rem;
            font-weight: 500;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            color: var(--accent-gold);
            transition: all var(--transition-fast);
        }

        .view-all-link svg {
            width: 18px;
            height: 18px;
            transition: transform var(--transition-fast);
        }

        .view-all-link:hover {
            color: var(--accent-gold-light);
        }

        .view-all-link:hover svg {
            transform: translateX(5px);
        }

        /* ============================================
           SOCIAL CONNECT BAR
           ============================================ */
        .social-connect-section {
            background: var(--cream);
            padding: var(--space-lg) var(--space-lg);
        }

        .social-connect-container {
            max-width: var(--max-width);
            margin: 0 auto;
            display: flex;
            justify-content: flex-start;
            align-items: center;
            gap: var(--space-lg);
            flex-wrap: wrap;
        }

        .social-connect-text {
            font-family: var(--font-display);
            font-size: clamp(1.5rem, 3vw, 2rem);
            font-weight: 300;
            color: var(--text-dark);
        }

        .social-connect-links {
            display: flex;
            gap: var(--space-md);
        }

        .social-link {
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--accent-gold);
            transition: all var(--transition-fast);
        }

        .social-link svg {
            width: 26px;
            height: 26px;
        }

        .social-link:hover {
            color: var(--accent-gold-dark);
            transform: translateY(-3px);
        }

        /* ============================================
           INTERACTIVE DISCOVERY SECTION
           ============================================ */
        .discovery-section {
            background: var(--primary-dark);
            padding: var(--space-xl) var(--space-lg);
            position: relative;
            overflow: hidden;
        }

        .discovery-section::before {
            content: '';
            position: absolute;
            inset: 0;
            background: 
                radial-gradient(ellipse at 50% 100%, rgba(201, 169, 98, 0.08) 0%, transparent 60%);
            pointer-events: none;
        }

        .discovery-container {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .discovery-prompt {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        .discovery-accent-bar {
            width: 4px;
            height: 50px;
            background: var(--accent-gold);
            flex-shrink: 0;
        }

        .discovery-title {
            font-family: var(--font-display);
            font-size: clamp(1.75rem, 4vw, 2.5rem);
            font-weight: 300;
            color: var(--off-white);
            line-height: 1.3;
        }

        .discovery-options {
            display: flex;
            gap: var(--space-lg);
            margin-bottom: var(--space-lg);
            flex-wrap: wrap;
            padding-left: calc(4px + var(--space-md));
        }

        .discovery-option {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .discovery-option input {
            position: absolute;
            opacity: 0;
            pointer-events: none;
        }

        .discovery-option-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 2px solid var(--accent-gold);
            position: relative;
            transition: all var(--transition-fast);
        }

        .discovery-option-indicator::after {
            content: '';
            position: absolute;
            inset: 2px;
            border-radius: 50%;
            background: var(--accent-gold);
            transform: scale(0);
            transition: transform var(--transition-fast);
        }

        .discovery-option input:checked + .discovery-option-indicator::after {
            transform: scale(1);
        }

        .discovery-option-label {
            font-size: 0.75rem;
            font-weight: 500;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--accent-gold);
            transition: color var(--transition-fast);
        }

        .discovery-option:hover .discovery-option-label {
            color: var(--accent-gold-light);
        }

        .discovery-search {
            display: flex;
            gap: var(--space-sm);
            padding-left: calc(4px + var(--space-md));
        }

        @media (max-width: 768px) {
            .discovery-search {
                flex-direction: column;
                padding-left: 0;
            }
            .discovery-options {
                padding-left: 0;
            }
        }

        .discovery-search-input {
            flex: 1;
            font-family: var(--font-body);
            font-size: 1rem;
            color: var(--text-light);
            background: var(--primary-charcoal);
            border: 1px solid rgba(201, 169, 98, 0.2);
            padding: 18px 24px;
            outline: none;
            transition: all var(--transition-fast);
        }

        .discovery-search-input::placeholder {
            color: var(--text-muted);
        }

        .discovery-search-input:focus {
            border-color: var(--accent-gold);
            box-shadow: 0 0 0 3px rgba(201, 169, 98, 0.1);
        }

        .discovery-search-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: var(--font-body);
            font-size: 0.7rem;
            font-weight: 500;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--primary-dark);
            background: var(--accent-gold);
            border: none;
            padding: 18px 32px;
            cursor: pointer;
            transition: all var(--transition-fast);
            white-space: nowrap;
        }

        .discovery-search-btn svg {
            width: 18px;
            height: 18px;
        }

        .discovery-search-btn:hover {
            background: var(--accent-gold-light);
            transform: translateX(4px);
        }

        /* ============================================
           NEWSLETTER SECTION
           ============================================ */
        .newsletter-section {
            background: var(--primary-warm);
            padding: var(--space-2xl) var(--space-lg);
            position: relative;
            overflow: hidden;
        }

        .newsletter-section::before {
            content: '';
            position: absolute;
            inset: 0;
            background: 
                radial-gradient(ellipse at 30% 50%, rgba(201, 169, 98, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 70% 50%, rgba(201, 169, 98, 0.06) 0%, transparent 40%);
            pointer-events: none;
        }

        .newsletter-container {
            max-width: var(--max-width);
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .newsletter-eyebrow {
            font-size: 0.65rem;
            font-weight: 500;
            letter-spacing: 0.4em;
            text-transform: uppercase;
            color: var(--accent-gold);
            margin-bottom: var(--space-sm);
        }

        .newsletter-title {
            font-family: var(--font-display);
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 300;
            color: var(--off-white);
            margin-bottom: var(--space-md);
        }

        .newsletter-text {
            font-size: 1rem;
            color: var(--text-muted);
            line-height: 1.8;
            margin-bottom: var(--space-lg);
        }

        .newsletter-form {
            display: flex;
            gap: var(--space-sm);
            max-width: 500px;
            margin: 0;
        }

        @media (max-width: 580px) {
            .newsletter-form {
                flex-direction: column;
            }
        }

        .newsletter-input {
            flex: 1;
            font-family: var(--font-body);
            font-size: 0.95rem;
            color: var(--text-light);
            background: rgba(26, 25, 21, 0.6);
            border: 1px solid rgba(201, 169, 98, 0.2);
            padding: 16px 24px;
            outline: none;
            transition: all var(--transition-fast);
        }

        .newsletter-input::placeholder {
            color: var(--text-muted);
        }

        .newsletter-input:focus {
            border-color: var(--accent-gold);
            box-shadow: 0 0 0 3px rgba(201, 169, 98, 0.1);
        }

        .newsletter-btn {
            font-family: var(--font-body);
            font-size: 0.7rem;
            font-weight: 500;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--primary-dark);
            background: var(--accent-gold);
            border: 1px solid var(--accent-gold);
            padding: 16px 32px;
            cursor: pointer;
            transition: all var(--transition-fast);
            white-space: nowrap;
        }

        .newsletter-btn:hover {
            background: var(--accent-gold-light);
            border-color: var(--accent-gold-light);
        }

        /* ============================================
           FOOTER
           ============================================ */
        .footer {
            background: var(--primary-dark);
            border-top: 1px solid rgba(201, 169, 98, 0.1);
            padding: var(--space-xl) var(--space-lg) var(--space-lg);
        }

        .footer-grid {
            max-width: var(--max-width);
            margin: 0 auto;
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: var(--space-xl);
        }

        @media (max-width: 968px) {
            .footer-grid {
                grid-template-columns: 1fr 1fr;
                gap: var(--space-lg);
            }
        }

        @media (max-width: 580px) {
            .footer-grid {
                grid-template-columns: 1fr;
            }
        }

        .footer-brand .logo {
            margin-bottom: var(--space-md);
        }

        .footer-description {
            font-size: 0.9rem;
            color: var(--text-muted);
            line-height: 1.8;
            max-width: 280px;
        }

        .footer-heading {
            font-size: 0.65rem;
            font-weight: 500;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            color: var(--accent-gold);
            margin-bottom: var(--space-md);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: var(--space-sm);
        }

        .footer-links a {
            font-size: 0.9rem;
            color: var(--text-muted);
            transition: color var(--transition-fast);
        }

        .footer-links a:hover {
            color: var(--off-white);
        }

        .footer-bottom {
            max-width: var(--max-width);
            margin: var(--space-lg) auto 0;
            padding-top: var(--space-lg);
            border-top: 1px solid rgba(201, 169, 98, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--space-md);
        }

        .footer-copyright {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .footer-legal {
            display: flex;
            gap: var(--space-md);
        }

        .footer-legal a {
            font-size: 0.8rem;
            color: var(--text-muted);
            transition: color var(--transition-fast);
        }

        .footer-legal a:hover {
            color: var(--accent-gold);
        }

        /* ============================================
           BACK TO TOP BUTTON
           ============================================ */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: var(--primary-charcoal);
            border: 1px solid rgba(201, 169, 98, 0.2);
            color: var(--accent-gold);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px);
            transition: all var(--transition-fast);
            z-index: 100;
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .back-to-top:hover {
            background: var(--accent-gold);
            color: var(--primary-dark);
            border-color: var(--accent-gold);
        }

        .back-to-top svg {
            width: 20px;
            height: 20px;
        }

        /* ============================================
           UTILITY CLASSES
           ============================================ */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M649WB9Z"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->    <!-- Page Loader -->
    <div class="page-loader" id="pageLoader">
        <div class="loader-content">
            <div class="loader-logo">Grand Park</div>
            <div class="loader-bar"></div>
        </div>
    </div>

    <!-- Header -->
    <header class="header" id="header" role="banner">
        <a href="../index.html" class="logo" aria-label="Grand Park Law Group - Home">
            <span class="logo-text">Grand Park Law Group</span>
            <span class="logo-tagline">A Professional Corporation</span>
        </a>
        <nav class="nav-desktop" role="navigation" aria-label="Main navigation">
            <a href="../about/index.html" class="nav-link">About</a>
            <a href="../practices/index.html" class="nav-link">Practices</a>
            <a href="../professionals/index.html" class="nav-link">Professionals</a>
            <a href="index.html" class="nav-link active">Insights</a>
            <a href="../contact/index.html" class="nav-link">Contact</a>
            <a href="../portal/index.html" class="nav-link">Members</a>
        </nav>
        <div class="header-actions">
            <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu" aria-expanded="false">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

<div class="menu-overlay" id="menuOverlay" role="dialog" aria-modal="true" aria-label="Navigation menu">
    <div class="menu-backdrop"></div>
    <div class="menu-panel">
        <nav class="menu-nav" role="navigation">
            <a href="../about/index.html" class="menu-nav-link">About</a>
            <a href="../practices/index.html" class="menu-nav-link">Practices</a>
            <a href="../professionals/index.html" class="menu-nav-link">Professionals</a>
            <a href="index.html" class="menu-nav-link">Insights</a>
            <a href="../contact/index.html" class="menu-nav-link">Contact</a>
            <a href="../portal/index.html" class="menu-nav-link">Members</a>
        </nav>
        <div class="menu-contact">
            <p class="menu-contact-label">Get In Touch</p>
            <p class="menu-contact-text">
                11835 W Olympic Blvd<br>
                Suite 870E<br>
                Los Angeles, CA 90064
            </p>
            <p class="menu-contact-text" style="margin-top: var(--space-sm);">
                <a href="tel:+18886294754">(888) 629-GPLG</a><br>
                <a href="mailto:info@grandparklawgroup.com">info@grandparklawgroup.com</a>
            </p>
            <div class="menu-social">
                <a href="https://linkedin.com/company/grandparklaw" target="_blank" rel="noopener" aria-label="LinkedIn">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                </a>
                <a href="https://twitter.com/grandparklaw" target="_blank" rel="noopener" aria-label="Twitter">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                </a>
                <a href="https://facebook.com/grandparklawgroup" target="_blank" rel="noopener" aria-label="Facebook">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                </a>
                <a href="https://instagram.com/grandparklawgroup" target="_blank" rel="noopener" aria-label="Instagram">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>
                </a>
            </div>
        </div>
    </div>
</div>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-bg-pattern"></div>
        <div class="hero-gradient"></div>
        <div class="hero-content">
            <span class="hero-eyebrow">News & Publications</span>
            <h1 class="hero-title">Insights</h1>
            <p class="hero-description">Stay informed with our quarterly newsletter, legal analysis, and thought leadership on matters affecting our clients and communities.</p>
        </div>
    </section>

    <!-- Featured Carousel -->
    <section class="featured-carousel-section">
        <div class="carousel-container">
            <div class="carousel-header">
                <div>
                    <p class="carousel-label">Featured</p>
                    <h2 class="carousel-title">Latest Publications</h2>
                </div>
                <div class="carousel-controls">
                    <button class="carousel-btn" id="carouselPrev" aria-label="Previous">
                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <button class="carousel-btn" id="carouselNext" aria-label="Next">
                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="carousel-track-wrapper">
                <div class="carousel-track" id="carouselTrack">
                    <!-- Featured cards populated by JavaScript -->
                </div>
            </div>
            <div class="carousel-progress" id="carouselProgress">
                <!-- Dots populated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Filter Section -->
    <section class="filter-section">
        <div class="filter-container">
            <div class="filter-row">
                <div class="search-box">
                    <svg class="search-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                    <input type="text" class="search-input" id="searchInput" placeholder="Search insights...">
                </div>
                <div class="filter-tabs" id="filterTabs">
                    <button class="filter-tab active" data-category="all">All</button>
                    <button class="filter-tab" data-category="quarterly-newsletter">Newsletter</button>
                    <button class="filter-tab" data-category="legal-updates">Legal Updates</button>
                    <button class="filter-tab" data-category="case-results">Case Results</button>
                    <button class="filter-tab" data-category="firm-news">Firm News</button>
                    <button class="filter-tab" data-category="community">Community</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Insights Grid -->
    <section class="insights-section">
        <div class="insights-container">
            <div class="section-header">
                <p class="results-info" id="resultsInfo">Showing <strong>0</strong> insights</p>
                <div class="view-toggle">
                    <button class="view-btn active" id="gridViewBtn" aria-label="Grid view">
                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"/>
                        </svg>
                    </button>
                    <button class="view-btn" id="listViewBtn" aria-label="List view">
                        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="insights-grid" id="insightsGrid">
                <!-- Cards populated by JavaScript -->
            </div>
            <div class="load-more-container" id="loadMoreContainer" style="display: none;">
                <button class="load-more-btn" id="loadMoreBtn">Load More Insights</button>
            </div>
        </div>
    </section>

    <!-- View All Link -->
    <section class="view-all-section">
        <div class="view-all-container">
            <a href="#" class="view-all-link" id="viewAllLink">
                View All Publications
                <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
            </a>
        </div>
    </section>

    <!-- Social Connect Bar -->
    <section class="social-connect-section">
        <div class="social-connect-container">
            <span class="social-connect-text">Stay connected with us.</span>
            <div class="social-connect-links">
                <a href="https://www.linkedin.com/company/grandparklaw" class="social-link" aria-label="LinkedIn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                    </svg>
                </a>
                <a href="https://x.com/grandparklaw" class="social-link" aria-label="X (Twitter)">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                    </svg>
                </a>
                <a href="https://www.facebook.com/grandparklawgroup" class="social-link" aria-label="Facebook">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                    </svg>
                </a>
                <a href="https://www.instagram.com/grandparklawgroup" class="social-link" aria-label="Instagram">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/>
                    </svg>
                </a>
            </div>
        </div>
    </section>

    <!-- Interactive Discovery Section -->
    <section class="discovery-section">
        <div class="discovery-container">
            <div class="discovery-prompt">
                <div class="discovery-accent-bar"></div>
                <h2 class="discovery-title" id="discoveryTitle">What insight can we help you find?</h2>
            </div>
            <div class="discovery-options">
                <label class="discovery-option">
                    <input type="radio" name="discovery-type" value="publications" checked>
                    <span class="discovery-option-indicator"></span>
                    <span class="discovery-option-label">Publications</span>
                </label>
                <label class="discovery-option">
                    <input type="radio" name="discovery-type" value="case-results">
                    <span class="discovery-option-indicator"></span>
                    <span class="discovery-option-label">Case Results</span>
                </label>
                <label class="discovery-option">
                    <input type="radio" name="discovery-type" value="firm-news">
                    <span class="discovery-option-indicator"></span>
                    <span class="discovery-option-label">Firm News</span>
                </label>
            </div>
            <div class="discovery-search">
                <input type="text" class="discovery-search-input" id="discoverySearchInput" placeholder="Start typing to search insights...">
                <button class="discovery-search-btn" id="discoverySearchBtn">
                    Search Insights
                    <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                    </svg>
                </button>
            </div>
        </div>
    </section>

    <!-- Newsletter Section -->
    <section class="newsletter-section">
        <div class="newsletter-container">
            <p class="newsletter-eyebrow">Stay Connected</p>
            <h2 class="newsletter-title">Subscribe to Our Newsletter</h2>
            <p class="newsletter-text">Receive quarterly updates on legal developments, firm news, and insights directly in your inbox.</p>
            <form class="newsletter-form" id="newsletterForm">
                <input type="email" class="newsletter-input" placeholder="Enter your email address" required>
                <button type="submit" class="newsletter-btn">Subscribe</button>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="footer-grid">
            <div class="footer-brand">
                <a href="../index.html" class="logo">
                    <span class="logo-text">Grand Park Law Group</span>
                    <span class="logo-tagline">A Professional Corporation</span>
                </a>
                <p class="footer-description">Dedicated advocates for individuals and businesses. We fight for justice in personal injury, employment, civil rights, and entertainment law.</p>
                <div class="footer-social">
                    <a href="https://linkedin.com/company/grandparklaw" target="_blank" rel="noopener" aria-label="LinkedIn">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
                    </a>
                    <a href="https://twitter.com/grandparklaw" target="_blank" rel="noopener" aria-label="Twitter">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                    </a>
                    <a href="https://facebook.com/grandparklawgroup" target="_blank" rel="noopener" aria-label="Facebook">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                    </a>
                    <a href="https://instagram.com/grandparklawgroup" target="_blank" rel="noopener" aria-label="Instagram">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>
                    </a>
                </div>
            </div>

            <div class="footer-column">
                <h4>Practices</h4>
                <ul class="footer-links">
                    <li><a href="../practices/personal-injury/index.html">Personal Injury</a></li>
                    <li><a href="../practices/medical-malpractice/index.html">Medical Malpractice</a></li>
                    <li><a href="../practices/employment-law/index.html">Employment Law</a></li>
                    <li><a href="../practices/civil-rights/index.html">Civil Rights</a></li>
                    <li><a href="../practices/entertainment/index.html">Entertainment &amp; Talent</a></li>
                    <li><a href="../practices/real-property/index.html">Real Property</a></li>
                    <li><a href="../practices/corporate-governance/index.html">Corporate Governance</a></li>
                </ul>
            </div>

            <div class="footer-column">
                <h4>Firm</h4>
                <ul class="footer-links">
                    <li><a href="../about/index.html">About</a></li>
                    <li><a href="../professionals/index.html">Professionals</a></li>
                    <li><a href="../careers/index.html">Careers</a></li>
                    <li><a href="../pro-bono/index.html">Pro Bono</a></li>
                    <li><a href="../diversity/index.html">Diversity &amp; Inclusion</a></li>
                <li class="footer-resource-label"><a href="../resources/index.html">Resources</a></li>
                <li class="footer-resource-item"><a href="../resources/public-agencies/index.html">Public Agencies</a></li>
                <li class="footer-resource-item"><a href="../resources/us-courts/index.html">Courts &amp; Judiciary</a></li>
                </ul>
            </div>

            <div class="footer-column">
                <h4>Offices</h4>
                <ul class="footer-links">
                    <li><strong style="color: var(--off-white);">Los Angeles</strong></li>
                    <li>11835 W Olympic Blvd</li>
                    <li>Suite 870E</li>
                    <li>Los Angeles, CA 90064</li>
                    <li style="margin-top: var(--space-sm);"><a href="tel:+18886294754">(888) 629-GPLG</a></li>
                    <li><a href="mailto:info@grandparklawgroup.com">info@grandparklawgroup.com</a></li>
                    <li style="margin-top: var(--space-md);"><strong style="color: var(--off-white);">Chicago</strong></li>
                    <li>680 N. Lake Shore Drive</li>
                    <li>Suite 110</li>
                    <li>Chicago, Illinois 60611</li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="footer-copyright"> <span data-year>2026</span> Grand Park Law Group, A.P.C. All rights reserved.</p>
            <div class="footer-legal">
                <a href="../legal/privacy-policy/index.html">Privacy Policy</a>
                <a href="../legal/terms-of-use/index.html">Terms of Use</a>
                <a href="../legal/attorney-advertising/index.html">Attorney Advertising</a>
            </div>
        </div>
    </footer>

    <!-- Back to Top -->
    <button class="back-to-top" id="backToTop" aria-label="Back to top">
        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"/>
        </svg>
    </button>

    <script>
        // ============================================
        // CONFIGURATION - UPDATE THESE VALUES
        // ============================================
        const CONFIG = {
            // Ghost CMS - Editorial Content (newsletters, articles, thought leadership)
            ghost: {
                url: 'YOUR_GHOST_URL', // e.g., 'https://ghost.grandparklawgroup.com'
                apiKey: 'YOUR_GHOST_CONTENT_API_KEY',
                enabled: false // Set to true when Ghost is configured
            },
            // Directus CMS - Structured Content (case results, attorney news, practice updates)
            directus: {
                url: 'YOUR_DIRECTUS_URL', // e.g., 'https://directus.grandparklawgroup.com'
                apiKey: 'YOUR_DIRECTUS_API_TOKEN',
                enabled: false // Set to true when Directus is configured
            },
            // Google Sheets - Quick Updates (announcements, simple news)
            sheets: {
                csvUrl: 'YOUR_PUBLISHED_GOOGLE_SHEET_CSV_URL',
                enabled: false // Set to true when Sheets is configured
            },
            // Listmonk Newsletter
            listmonk: {
                url: 'YOUR_LISTMONK_URL', // e.g., 'https://listmonk.grandparklawgroup.com'
                listUUID: 'YOUR_LIST_UUID',
                enabled: false
            },
            // Mautic Marketing Automation (optional)
            mautic: {
                url: 'YOUR_MAUTIC_URL',
                enabled: false
            },
            // Display Settings
            itemsPerPage: 9,
            featuredCount: 4
        };

        // ============================================
        // FALLBACK DEMO DATA
        // ============================================
        const DEMO_DATA = [
            {
                id: 1,
                title: "Q4 2024 Newsletter: Year in Review & Looking Ahead",
                slug: "q4-2024-newsletter",
                category: "quarterly-newsletter",
                categoryLabel: "Quarterly Newsletter",
                date: "2024-12-15",
                excerpt: "As we close out 2024, we reflect on a year of significant victories for our clients across personal injury, employment discrimination, and civil rights matters.",
                image: null,
                featured: true,
                readTime: 8,
                source: "demo",
                url: "#"
            },
            {
                id: 2,
                title: "California's New Workplace Violence Prevention Law",
                slug: "california-workplace-violence-law",
                category: "legal-updates",
                categoryLabel: "Legal Updates",
                date: "2024-12-01",
                excerpt: "Senate Bill 553 requires most California employers to implement workplace violence prevention plans. We break down the key requirements.",
                image: null,
                featured: true,
                readTime: 5,
                source: "demo",
                url: "#"
            },
            {
                id: 3,
                title: "$4.2 Million Settlement in Wrongful Termination Case",
                slug: "wrongful-termination-settlement",
                category: "case-results",
                categoryLabel: "Case Results",
                date: "2024-11-18",
                excerpt: "Our employment team secured a significant settlement for a client who was wrongfully terminated after reporting safety violations.",
                image: null,
                featured: true,
                readTime: 3,
                source: "demo",
                url: "#"
            },
            {
                id: 4,
                title: "Grand Park Law Partners with Local Schools",
                slug: "community-partnership-schools",
                category: "community",
                categoryLabel: "Community",
                date: "2024-11-05",
                excerpt: "Announcing our new initiative to bring legal education to Los Angeles high school students, introducing them to civil rights law.",
                image: null,
                featured: true,
                readTime: 4,
                source: "demo",
                url: "#"
            },
            {
                id: 5,
                title: "Understanding California's New AI Employment Regulations",
                slug: "california-ai-employment-regulations",
                category: "legal-updates",
                categoryLabel: "Legal Updates",
                date: "2024-10-28",
                excerpt: "New regulations governing the use of artificial intelligence in hiring decisions take effect in 2026.",
                image: null,
                featured: false,
                readTime: 6,
                source: "demo",
                url: "#"
            },
            {
                id: 6,
                title: "Firm Welcomes Two New Associates",
                slug: "new-associates-announcement",
                category: "firm-news",
                categoryLabel: "Firm News",
                date: "2024-10-15",
                excerpt: "We are pleased to announce the addition of two talented attorneys to our team.",
                image: null,
                featured: false,
                readTime: 2,
                source: "demo",
                url: "#"
            },
            {
                id: 7,
                title: "Q3 2024 Newsletter: Advocacy in Action",
                slug: "q3-2024-newsletter",
                category: "quarterly-newsletter",
                categoryLabel: "Quarterly Newsletter",
                date: "2024-09-30",
                excerpt: "This quarter's newsletter highlights our successful trial outcomes, pro bono initiatives, and analysis of recent California Supreme Court decisions.",
                image: null,
                featured: false,
                readTime: 7,
                source: "demo",
                url: "#"
            },
            {
                id: 8,
                title: "Landmark Medical Malpractice Verdict: $7.8 Million",
                slug: "medical-malpractice-verdict",
                category: "case-results",
                categoryLabel: "Case Results",
                date: "2024-09-12",
                excerpt: "Our medical malpractice team obtained a jury verdict for a family whose child suffered permanent injuries.",
                image: null,
                featured: false,
                readTime: 4,
                source: "demo",
                url: "#"
            },
            {
                id: 9,
                title: "Entertainment Contract Trends: Protecting Talent",
                slug: "entertainment-contract-trends",
                category: "legal-updates",
                categoryLabel: "Legal Updates",
                date: "2024-08-25",
                excerpt: "As streaming platforms reshape the entertainment industry, we examine key contract provisions artists should negotiate.",
                image: null,
                featured: false,
                readTime: 5,
                source: "demo",
                url: "#"
            },
            {
                id: 10,
                title: "Civil Rights Victory: Police Misconduct Settlement",
                slug: "civil-rights-victory",
                category: "case-results",
                categoryLabel: "Case Results",
                date: "2024-08-10",
                excerpt: "Our civil rights practice secured a confidential settlement and policy reforms in a case involving excessive force.",
                image: null,
                featured: false,
                readTime: 3,
                source: "demo",
                url: "#"
            },
            {
                id: 11,
                title: "Partner Named to Top 100 Trial Lawyers List",
                slug: "top-100-trial-lawyers",
                category: "firm-news",
                categoryLabel: "Firm News",
                date: "2024-07-28",
                excerpt: "Senior Partner recognized for exceptional trial advocacy and commitment to client representation.",
                image: null,
                featured: false,
                readTime: 2,
                source: "demo",
                url: "#"
            },
            {
                id: 12,
                title: "Q2 2024 Newsletter: Justice Delivered",
                slug: "q2-2024-newsletter",
                category: "quarterly-newsletter",
                categoryLabel: "Quarterly Newsletter",
                date: "2024-06-30",
                excerpt: "A review of our second quarter achievements including significant settlements and community outreach.",
                image: null,
                featured: false,
                readTime: 6,
                source: "demo",
                url: "#"
            }
        ];

        // ============================================
        // STATE MANAGEMENT
        // ============================================
        let allInsights = [];
        let filteredInsights = [];
        let currentPage = 1;
        let currentCategory = 'all';
        let currentSearch = '';
        let currentView = 'grid';
        let carouselIndex = 0;

        // ============================================
        // DATA FETCHING FUNCTIONS
        // ============================================
        
        // Fetch from Ghost CMS (Editorial Content)
        async function fetchGhostPosts() {
            if (!CONFIG.ghost.enabled) return [];
            
            try {
                const response = await fetch(
                    `${CONFIG.ghost.url}/ghost/api/content/posts/?key=${CONFIG.ghost.apiKey}&include=tags&limit=all`
                );
                
                if (!response.ok) throw new Error('Ghost API error');
                const data = await response.json();
                
                return data.posts.map(post => ({
                    id: `ghost-${post.id}`,
                    title: post.title,
                    slug: post.slug,
                    category: mapGhostTag(post.tags),
                    categoryLabel: formatCategoryLabel(mapGhostTag(post.tags)),
                    date: post.published_at,
                    excerpt: post.custom_excerpt || post.excerpt || '',
                    image: post.feature_image,
                    featured: post.featured,
                    readTime: post.reading_time || 5,
                    source: 'ghost',
                    url: `${CONFIG.ghost.url}/${post.slug}`
                }));
            } catch (error) {
                console.error('Error fetching Ghost posts:', error);
                return [];
            }
        }

        // Fetch from Directus CMS (Structured Content)
        async function fetchDirectusPosts() {
            if (!CONFIG.directus.enabled) return [];
            
            try {
                const response = await fetch(
                    `${CONFIG.directus.url}/items/insights?fields=*,category.name,category.slug&filter[status][_eq]=published&sort=-date_published`,
                    {
                        headers: {
                            'Authorization': `Bearer ${CONFIG.directus.apiKey}`
                        }
                    }
                );
                
                if (!response.ok) throw new Error('Directus API error');
                const data = await response.json();
                
                return data.data.map(post => ({
                    id: `directus-${post.id}`,
                    title: post.title,
                    slug: post.slug || slugify(post.title),
                    category: post.category?.slug || 'firm-news',
                    categoryLabel: post.category?.name || 'Firm News',
                    date: post.date_published,
                    excerpt: post.excerpt || '',
                    image: post.featured_image ? `${CONFIG.directus.url}/assets/${post.featured_image}` : null,
                    featured: post.featured || false,
                    readTime: post.read_time || 5,
                    source: 'directus',
                    url: post.external_url || `#${post.slug}`
                }));
            } catch (error) {
                console.error('Error fetching Directus posts:', error);
                return [];
            }
        }

        // Fetch from Google Sheets
        async function fetchSheetsPosts() {
            if (!CONFIG.sheets.enabled) return [];
            
            try {
                const response = await fetch(CONFIG.sheets.csvUrl);
                const csvText = await response.text();
                return parseCSV(csvText);
            } catch (error) {
                console.error('Error fetching Sheets data:', error);
                return [];
            }
        }

        // Parse CSV data
        function parseCSV(csv) {
            const lines = csv.split('\n');
            const headers = lines[0].split(',').map(h => h.trim().toLowerCase());
            const posts = [];

            for (let i = 1; i < lines.length; i++) {
                if (!lines[i].trim()) continue;
                
                const values = parseCSVLine(lines[i]);
                const post = {};
                
                headers.forEach((header, index) => {
                    post[header] = values[index]?.trim() || '';
                });

                // Only include published posts
                if (post.status?.toLowerCase() === 'published' || !post.status) {
                    posts.push({
                        id: `sheet-${i}`,
                        title: post.title,
                        slug: post.slug || slugify(post.title),
                        category: post.category?.toLowerCase().replace(/\s+/g, '-') || 'firm-news',
                        categoryLabel: post.category || 'Firm News',
                        date: post.date,
                        excerpt: post.excerpt,
                        image: post.image || null,
                        featured: post.featured?.toLowerCase() === 'true',
                        readTime: parseInt(post.readtime) || 5,
                        source: 'sheets',
                        url: post.url || '#'
                    });
                }
            }

            return posts;
        }

        // Parse CSV line handling quoted values
        function parseCSVLine(line) {
            const result = [];
            let current = '';
            let inQuotes = false;

            for (let char of line) {
                if (char === '"') {
                    inQuotes = !inQuotes;
                } else if (char === ',' && !inQuotes) {
                    result.push(current);
                    current = '';
                } else {
                    current += char;
                }
            }
            result.push(current);
            return result;
        }

        // Helper: Map Ghost tags to categories
        function mapGhostTag(tags) {
            if (!tags || tags.length === 0) return 'firm-news';
            const tagMap = {
                'newsletter': 'quarterly-newsletter',
                'legal': 'legal-updates',
                'case': 'case-results',
                'community': 'community',
                'news': 'firm-news'
            };
            const firstTag = tags[0].slug.toLowerCase();
            return tagMap[firstTag] || 'firm-news';
        }

        // Helper: Format category label
        function formatCategoryLabel(category) {
            return category.split('-').map(word => 
                word.charAt(0).toUpperCase() + word.slice(1)
            ).join(' ');
        }

        // Helper: Create slug from title
        function slugify(text) {
            return text.toLowerCase()
                .replace(/[^a-z0-9]+/g, '-')
                .replace(/(^-|-$)/g, '');
        }

        // ============================================
        // RENDERING FUNCTIONS
        // ============================================

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        function getPlaceholderSVG() {
            return `<svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"/>
            </svg>`;
        }

        function renderFeaturedCarousel() {
            const featured = allInsights.filter(item => item.featured).slice(0, CONFIG.featuredCount);
            const track = document.getElementById('carouselTrack');
            const progress = document.getElementById('carouselProgress');

            track.innerHTML = featured.map(item => `
                <article class="featured-card">
                    <a href="${item.url}" class="featured-card-link">
                        <div class="featured-card-image">
                            ${item.image 
                                ? `<img src="${item.image}" alt="${item.title}" loading="lazy">`
                                : `<div class="placeholder">${getPlaceholderSVG()}</div>`
                            }
                            <span class="featured-card-category">${item.categoryLabel}</span>
                        </div>
                        <div class="featured-card-body">
                            <div class="featured-card-meta">
                                <span>${formatDate(item.date)}</span>
                                <span class="divider"></span>
                                <span>${item.readTime} min read</span>
                            </div>
                            <h3 class="featured-card-title">${item.title}</h3>
                            <p class="featured-card-excerpt">${item.excerpt}</p>
                            <div class="featured-card-footer">
                                <span class="read-time">
                                    <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                    ${item.readTime} min read
                                </span>
                                <span class="card-arrow">
                                    <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                                    </svg>
                                </span>
                            </div>
                        </div>
                    </a>
                </article>
            `).join('');

            // Render progress dots
            const dotCount = Math.ceil(featured.length / 2);
            progress.innerHTML = Array(dotCount).fill(0).map((_, i) => 
                `<span class="carousel-dot ${i === 0 ? 'active' : ''}" data-index="${i}"></span>`
            ).join('');
        }

        function renderInsightsGrid() {
            const grid = document.getElementById('insightsGrid');
            const start = 0;
            const end = currentPage * CONFIG.itemsPerPage;
            const itemsToShow = filteredInsights.slice(start, end);

            grid.innerHTML = itemsToShow.map((item, index) => `
                <article class="insight-card" style="animation-delay: ${index * 0.1}s">
                    <a href="${item.url}" class="insight-card-link">
                        <div class="card-image">
                            ${item.image 
                                ? `<img src="${item.image}" alt="${item.title}" loading="lazy">`
                                : `<div class="placeholder">${getPlaceholderSVG()}</div>`
                            }
                            ${item.source !== 'demo' ? `<span class="source-badge ${item.source}">${item.source}</span>` : ''}
                        </div>
                        <div class="card-content">
                            <span class="card-category">${item.categoryLabel}</span>
                            <h3 class="card-title">${item.title}</h3>
                            <p class="card-date">${formatDate(item.date)}</p>
                            <p class="card-excerpt">${item.excerpt}</p>
                            <div class="card-footer">
                                <span class="read-time">
                                    <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                    ${item.readTime} min
                                </span>
                                <span class="card-arrow">
                                    <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                                    </svg>
                                </span>
                            </div>
                        </div>
                    </a>
                </article>
            `).join('');

            // Update results info
            document.getElementById('resultsInfo').innerHTML = 
                `Showing <strong>${itemsToShow.length}</strong> of ${filteredInsights.length} insights`;

            // Show/hide load more
            const loadMoreContainer = document.getElementById('loadMoreContainer');
            loadMoreContainer.style.display = end < filteredInsights.length ? 'block' : 'none';

            // Trigger card animations
            setTimeout(() => {
                document.querySelectorAll('.insight-card').forEach(card => {
                    card.classList.add('visible');
                });
            }, 100);
        }

        // ============================================
        // FILTER & SEARCH FUNCTIONS
        // ============================================

        function filterInsights() {
            filteredInsights = allInsights.filter(item => {
                const matchesCategory = currentCategory === 'all' || item.category === currentCategory;
                const matchesSearch = !currentSearch || 
                    item.title.toLowerCase().includes(currentSearch.toLowerCase()) ||
                    item.excerpt.toLowerCase().includes(currentSearch.toLowerCase());
                return matchesCategory && matchesSearch;
            });

            // Sort by date (newest first)
            filteredInsights.sort((a, b) => new Date(b.date) - new Date(a.date));

            currentPage = 1;
            renderInsightsGrid();
        }

        // ============================================
        // CAROUSEL FUNCTIONS
        // ============================================

        function updateCarousel(direction) {
            const track = document.getElementById('carouselTrack');
            const cards = track.querySelectorAll('.featured-card');
            const dots = document.querySelectorAll('.carousel-dot');
            const maxIndex = Math.ceil(cards.length / 2) - 1;

            if (direction === 'next') {
                carouselIndex = carouselIndex >= maxIndex ? 0 : carouselIndex + 1;
            } else {
                carouselIndex = carouselIndex <= 0 ? maxIndex : carouselIndex - 1;
            }

            const cardWidth = cards[0]?.offsetWidth || 400;
            const gap = 32;
            track.style.transform = `translateX(-${carouselIndex * (cardWidth * 2 + gap * 2)}px)`;

            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === carouselIndex);
            });
        }

        // ============================================
        // EVENT LISTENERS
        // ============================================

        function initEventListeners() {
            // Header scroll
            window.addEventListener('scroll', () => {
                document.getElementById('header').classList.toggle('scrolled', window.scrollY > 50);
                document.getElementById('backToTop').classList.toggle('visible', window.scrollY > 500);
            });

            // Filter tabs
            document.getElementById('filterTabs').addEventListener('click', (e) => {
                if (e.target.classList.contains('filter-tab')) {
                    document.querySelectorAll('.filter-tab').forEach(tab => tab.classList.remove('active'));
                    e.target.classList.add('active');
                    currentCategory = e.target.dataset.category;
                    filterInsights();
                }
            });

            // Search input
            let searchTimeout;
            document.getElementById('searchInput').addEventListener('input', (e) => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    currentSearch = e.target.value;
                    filterInsights();
                }, 300);
            });

            // View toggle
            document.getElementById('gridViewBtn').addEventListener('click', () => {
                currentView = 'grid';
                document.getElementById('insightsGrid').classList.remove('list-view');
                document.getElementById('gridViewBtn').classList.add('active');
                document.getElementById('listViewBtn').classList.remove('active');
            });

            document.getElementById('listViewBtn').addEventListener('click', () => {
                currentView = 'list';
                document.getElementById('insightsGrid').classList.add('list-view');
                document.getElementById('listViewBtn').classList.add('active');
                document.getElementById('gridViewBtn').classList.remove('active');
            });

            // Load more
            document.getElementById('loadMoreBtn').addEventListener('click', () => {
                currentPage++;
                renderInsightsGrid();
            });

            // Carousel controls
            document.getElementById('carouselPrev').addEventListener('click', () => updateCarousel('prev'));
            document.getElementById('carouselNext').addEventListener('click', () => updateCarousel('next'));
            
            document.getElementById('carouselProgress').addEventListener('click', (e) => {
                if (e.target.classList.contains('carousel-dot')) {
                    carouselIndex = parseInt(e.target.dataset.index);
                    updateCarousel();
                }
            });

            // Back to top
            document.getElementById('backToTop').addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            // Newsletter form - Listmonk Integration
            document.getElementById('newsletterForm').addEventListener('submit', async (e) => {
                e.preventDefault();
                const emailInput = e.target.querySelector('input');
                const submitBtn = e.target.querySelector('button');
                const email = emailInput.value;

                // Disable form during submission
                emailInput.disabled = true;
                submitBtn.disabled = true;
                submitBtn.textContent = 'Subscribing...';

                try {
                    if (CONFIG.listmonk.enabled) {
                        // Subscribe via Listmonk API
                        const response = await fetch(`${CONFIG.listmonk.url}/api/public/subscription`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                email: email,
                                name: '',
                                list_uuids: [CONFIG.listmonk.listUUID]
                            })
                        });

                        if (response.ok) {
                            showNotification('Success! Please check your email to confirm your subscription.', 'success');
                            e.target.reset();

                            // Optional: Track in Mautic
                            if (CONFIG.mautic.enabled) {
                                trackMauticSubscription(email);
                            }
                        } else {
                            const errorData = await response.json();
                            throw new Error(errorData.message || 'Subscription failed');
                        }
                    } else {
                        // Fallback: Show message that system is being configured
                        showNotification('Thank you for your interest! Our newsletter system is being set up. Please check back soon.', 'info');
                    }
                } catch (error) {
                    console.error('Subscription error:', error);
                    showNotification('There was an error processing your subscription. Please try again.', 'error');
                } finally {
                    emailInput.disabled = false;
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'Subscribe';
                }
            });

            // View All Publications link
            document.getElementById('viewAllLink').addEventListener('click', (e) => {
                e.preventDefault();
                
                // Reset to show all
                document.querySelectorAll('.filter-tab').forEach(tab => {
                    tab.classList.remove('active');
                    if (tab.dataset.category === 'all') {
                        tab.classList.add('active');
                    }
                });
                currentCategory = 'all';
                currentSearch = '';
                document.getElementById('searchInput').value = '';
                
                // Filter and render
                filterInsights();
                
                // Scroll to insights
                document.querySelector('.filter-section').scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
            });

            // Discovery section functionality
            const discoveryOptions = document.querySelectorAll('input[name="discovery-type"]');
            const discoverySearchInput = document.getElementById('discoverySearchInput');
            const discoverySearchBtn = document.getElementById('discoverySearchBtn');

            // Map discovery options to filter categories
            const discoveryMap = {
                'publications': 'quarterly-newsletter',
                'case-results': 'case-results',
                'firm-news': 'firm-news'
            };

            function executeDiscoverySearch() {
                // Get selected discovery type
                const selectedType = document.querySelector('input[name="discovery-type"]:checked').value;
                const searchQuery = discoverySearchInput.value.trim();

                // Map to filter category
                const filterCategory = discoveryMap[selectedType] || 'all';

                // Update the main filter tabs
                document.querySelectorAll('.filter-tab').forEach(tab => {
                    tab.classList.remove('active');
                    if (tab.dataset.category === filterCategory) {
                        tab.classList.add('active');
                    }
                });

                // Set current category and search
                currentCategory = filterCategory;
                if (searchQuery) {
                    document.getElementById('searchInput').value = searchQuery;
                    currentSearch = searchQuery;
                }

                // Filter and render
                filterInsights();

                // Scroll to the insights grid
                document.querySelector('.filter-section').scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
            }

            discoverySearchBtn.addEventListener('click', executeDiscoverySearch);
            
            discoverySearchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    executeDiscoverySearch();
                }
            });

            // Update discovery title based on selection
            discoveryOptions.forEach(option => {
                option.addEventListener('change', () => {
                    const labels = {
                        'publications': 'What publication can we help you find?',
                        'case-results': 'Looking for case results and verdicts?',
                        'firm-news': 'What firm news are you interested in?'
                    };
                    document.getElementById('discoveryTitle').textContent = 
                        labels[option.value] || 'What insight can we help you find?';
                });
            });
        }

        // Notification system
        function showNotification(message, type = 'info') {
            // Remove existing notification
            const existing = document.querySelector('.notification');
            if (existing) existing.remove();

            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <span>${message}</span>
                <button class="notification-close" onclick="this.parentElement.remove()"></button>
            `;
            document.body.appendChild(notification);

            // Auto-remove after 5 seconds
            setTimeout(() => notification.remove(), 5000);
        }

        // Mautic tracking (optional)
        function trackMauticSubscription(email) {
            if (!CONFIG.mautic.enabled) return;
            
            // Mautic tracking pixel/form submission
            const img = new Image();
            img.src = `${CONFIG.mautic.url}/mtracking.gif?email=${encodeURIComponent(email)}&tags=newsletter-signup`;
        }

        // ============================================
        // INITIALIZATION
        // ============================================

        async function init() {
            // Fetch data from all three sources in parallel
            const [ghostPosts, directusPosts, sheetsPosts] = await Promise.all([
                fetchGhostPosts(),
                fetchDirectusPosts(),
                fetchSheetsPosts()
            ]);

            // Log source counts for debugging
            console.log(` Content sources loaded:
                - Ghost: ${ghostPosts.length} articles
                - Directus: ${directusPosts.length} articles  
                - Sheets: ${sheetsPosts.length} articles`);

            // Combine all sources
            allInsights = [...ghostPosts, ...directusPosts, ...sheetsPosts];
            
            // Use demo data if nothing else available
            if (allInsights.length === 0) {
                console.log(' No content sources configured, using demo data');
                allInsights = DEMO_DATA;
            }

            // Sort by date
            allInsights.sort((a, b) => new Date(b.date) - new Date(a.date));
            filteredInsights = [...allInsights];

            // Render content
            renderFeaturedCarousel();
            renderInsightsGrid();

            // Initialize event listeners
            initEventListeners();

            // Hide loader
            setTimeout(() => {
                document.getElementById('pageLoader').classList.add('loaded');
            }, 800);
        }

        // Start the app
        document.addEventListener('DOMContentLoaded', init);
    </script>
    <script src="../assets/js/main.js"></script>
</body>
</html>
